# paths

source "~/.mutt/lang_en_US"

#set folder = "~/Mail/uiuc"
set imap_user = "`lpass show 2971987286 --user`"
set imap_pass = "`lpass show 2971987286 --password`"
set folder = imaps://outlook.office365.com/
set header_cache = "~/.mutt/cache/headers"
set message_cachedir = "~/.mutt/cache/bodies"
set certificate_file = "/etc/ssl/certs/ca-certificates.crt"
set mailcap_path = "~/.mutt/mailcap"
set tmpdir = "~/.mutt/tmp"
set spoolfile = "+Inbox"

set wait_key = no
set mbox_type = Maildir
set timeout = 3
set mail_check = 0

set quit
set thorough_search
set mail_check_stats
unset confirmappend
unset move
unset mark_old
unset beep_new

set sidebar_visible

set realname="Matthew Turk"
set from="$imap_user"
set sort=threads
set sort_aux = reverse-last-date-received
set meta_key=yes
set nomark_old # Don't mark as old

bind browser <return> view-file

set status_chars  = " *%A"
set status_format = "───[ Folder: %f ]───[%r%m messages%?n? (%n new)?%?d? (%d to delete)?%?t? (%t tagged)? ]───%>─%?p?( %p postponed )?───"

source ~/.mutt/mutt-colors-solarized-dark-256.muttrc

# Server name: smtp.office365.com
# Port: 587
# Encryption method: STARTTLS
set smtp_pass = $imap_pass
set smtp_url  = "smtp://$imap_user@smtp.office365.com:587/"
set ssl_force_tls = yes
set smtp_authenticators="login"

# Setup some folders

set postponed= +$my_drafts_noquote
set record= +$my_sent_noquote
set trash= +$my_trash_noquote
mailboxes

set imap_check_subscribed="yes"
set imap_list_subscribed="yes"
set timeout=15
set mail_check=90
set imap_keepalive=180
set imap_idle

set smart_wrap="yes"
alternative_order text/plain
auto_view text/html

bind    index   G   imap-fetch-mail
bind    index   g   noop
macro   index   gi "<change-folder>=INBOX<enter>"       "Go to Inbox"
macro   index   gs "<change-folder>=$my_sent<enter>"    "Go to Sent"
macro   index   gd "<change-folder>=$my_drafts<enter>"  "Go to Drafts"
macro   index   gt "<change-folder>=$my_trash<enter>"   "Go to Trash"
macro   index   ga "<change-folder>=$my_trash<enter>"   "Go to Archive"

bind    index   <up>        previous-entry
bind    index   <down>      next-entry
bind    index   <delete>    delete-message
bind    index   -           collapse-thread
bind    index   _           collapse-all

bind    index   x           tag-thread
macro   index   e           "<tag-prefix><delete-message>" "Archive Selected"

set mailcap_path = ~/.mutt/mailcap

source ~/.mutt/aliases
set alias_file=~/.mutt/aliases
